ffmpeg -strict experimental -re -f lavfi -i life=s=300x200:mold=10:r=60:ratio=0.1:death_color=#C83232:life_color=#00ff00,scale=1280:720:flags=16 -f lavfi -i anullsrc=channel_layout=stereo:sample_rate=44100 -ar 44100 -ac 2  -force_key_frames expr:gte(t,n_forced*1) -preset medium -filter_complex [0:v:0]setpts=PTS-STARTPTS[vm];[vm]split=4[v0][v1][v2][v3];[v0]scale=-2:240[vscaled0];[v1]scale=-2:360[vscaled1];[v2]scale=-2:480[vscaled2] -map [vscaled0] -c:v:0 libx264 -b:v:0 350k -maxrate:v:0 350k -bufsize:v:0 350k -map 1:a:0 -c:a:0 aac -b:a:0 128k -map [vscaled1] -c:v:1 libx264 -b:v:1 800k -maxrate:v:1 800k -bufsize:v:1 800k -map 1:a:0 -c:a:1 aac -b:a:1 128k -map [vscaled2] -c:v:2 libx264 -b:v:2 1200k -maxrate:v:2 1200k -bufsize:v:2 1200k -map 1:a:0 -c:a:2 aac -b:a:2 160k -map [v3] -c:v:3 libx264 -b:v:3 2000k -maxrate:v:3 2000k -bufsize:v:3 2000k -map 1:a:0 -c:a:3 aac -b:a:3 160k -var_stream_map "v:0,a:0,name:240p v:1,a:1,name:360p v:2,a:2,name:480p v:3,a:3,name:720p" -hls_list_size 10 -threads 0 -f hls -pix_fmt yuv420p -hls_segment_type mpegts -hls_time 2 -hls_flags append_list -master_pl_name master.m3u8 -y %v.m3u8